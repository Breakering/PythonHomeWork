[2017-12-23 16:09:44,354][Thread-20:15584][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
sqlite3.IntegrityError: UNIQUE constraint failed: crm_enrollment.customer_id, crm_enrollment.enrolled_class_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 33, in enrollment
    consultant=customer_obj.consultant,
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 394, in create
    obj.save(force_insert=True, using=self.db)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 807, in save
    force_update=force_update, update_fields=update_fields)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 837, in save_base
    updated = self._save_table(raw, cls, force_insert, force_update, using, update_fields)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 923, in _save_table
    result = self._do_insert(cls._base_manager, using, fields, update_pk, raw)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 962, in _do_insert
    using=using, raw=raw)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 1076, in _insert
    return query.get_compiler(using=using).execute_sql(return_id)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\compiler.py", line 1099, in execute_sql
    cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 80, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\utils.py", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\utils\six.py", line 685, in reraise
    raise value.with_traceback(tb)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.IntegrityError: UNIQUE constraint failed: crm_enrollment.customer_id, crm_enrollment.enrolled_class_id
[2017-12-23 16:18:59,083][Thread-17:14500][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
sqlite3.IntegrityError: UNIQUE constraint failed: crm_enrollment.customer_id, crm_enrollment.enrolled_class_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 33, in enrollment
    consultant=customer_obj.consultant,
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 394, in create
    obj.save(force_insert=True, using=self.db)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 807, in save
    force_update=force_update, update_fields=update_fields)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 837, in save_base
    updated = self._save_table(raw, cls, force_insert, force_update, using, update_fields)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 923, in _save_table
    result = self._do_insert(cls._base_manager, using, fields, update_pk, raw)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 962, in _do_insert
    using=using, raw=raw)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 1076, in _insert
    return query.get_compiler(using=using).execute_sql(return_id)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\compiler.py", line 1099, in execute_sql
    cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 80, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\utils.py", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\utils\six.py", line 685, in reraise
    raise value.with_traceback(tb)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.IntegrityError: UNIQUE constraint failed: crm_enrollment.customer_id, crm_enrollment.enrolled_class_id
[2017-12-23 16:19:58,686][Thread-4:16316][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
sqlite3.IntegrityError: UNIQUE constraint failed: crm_enrollment.customer_id, crm_enrollment.enrolled_class_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 33, in enrollment
    consultant=customer_obj.consultant,
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 394, in create
    obj.save(force_insert=True, using=self.db)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 807, in save
    force_update=force_update, update_fields=update_fields)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 837, in save_base
    updated = self._save_table(raw, cls, force_insert, force_update, using, update_fields)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 923, in _save_table
    result = self._do_insert(cls._base_manager, using, fields, update_pk, raw)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 962, in _do_insert
    using=using, raw=raw)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 1076, in _insert
    return query.get_compiler(using=using).execute_sql(return_id)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\compiler.py", line 1099, in execute_sql
    cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 80, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\utils.py", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\utils\six.py", line 685, in reraise
    raise value.with_traceback(tb)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.IntegrityError: UNIQUE constraint failed: crm_enrollment.customer_id, crm_enrollment.enrolled_class_id
[2017-12-23 16:22:31,053][Thread-3:15844][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 42, in enrollment
    return HttpResponse(json.dumps(ret))
  File "D:\Software\Anaconda\envs\py3-django\lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
  File "D:\Software\Anaconda\envs\py3-django\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "D:\Software\Anaconda\envs\py3-django\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "D:\Software\Anaconda\envs\py3-django\lib\json\encoder.py", line 180, in default
    o.__class__.__name__)
TypeError: Object of type 'dict_items' is not JSON serializable
[2017-12-23 16:24:11,652][Thread-3:11808][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 42, in enrollment
    print(dict(enrollment_form_obj.errors.as_data))
TypeError: 'method' object is not iterable
[2017-12-23 16:24:59,652][Thread-3:16128][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 42, in enrollment
    print(json.loads(enrollment_form_obj.errors.as_json))
  File "D:\Software\Anaconda\envs\py3-django\lib\json\__init__.py", line 348, in loads
    'not {!r}'.format(s.__class__.__name__))
TypeError: the JSON object must be str, bytes or bytearray, not 'method'
[2017-12-23 16:51:00,800][Thread-11:440][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 51, in enrollment
    "enrollment_form_obj": enrollment_form_obj,
UnboundLocalError: local variable 'enrollment_form_obj' referenced before assignment
[2017-12-23 16:51:01,761][Thread-12:16368][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 51, in enrollment
    "enrollment_form_obj": enrollment_form_obj,
UnboundLocalError: local variable 'enrollment_form_obj' referenced before assignment
[2017-12-23 17:31:34,652][Thread-1:15788][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/15/fiy8wz/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
TypeError: customer_registration() got multiple values for argument 'enrollment_id'
[2017-12-23 17:31:50,946][Thread-8:15028][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/15/fiy8wz/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
TypeError: customer_registration() got multiple values for argument 'enrollment_id'
[2017-12-23 17:31:55,569][Thread-9:11008][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/15/fiy8wz/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
TypeError: customer_registration() got multiple values for argument 'enrollment_id'
[2017-12-23 17:32:08,962][Thread-13:15000][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/15/fiy8wz/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
TypeError: customer_registration() got multiple values for argument 'enrollment_id'
[2017-12-23 17:32:10,387][Thread-1:7044][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/15/fiy8wz/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.customer_registration didn't return an HttpResponse object. It returned None instead.
[2017-12-23 17:32:11,352][Thread-3:16160][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/15/fiy8wz/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.customer_registration didn't return an HttpResponse object. It returned None instead.
[2017-12-23 17:32:12,272][Thread-4:10956][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/15/fiy8wz/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.customer_registration didn't return an HttpResponse object. It returned None instead.
[2017-12-23 17:32:13,079][Thread-5:15544][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/15/fiy8wz/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.customer_registration didn't return an HttpResponse object. It returned None instead.
[2017-12-23 17:32:18,356][Thread-1:12996][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/15/fiy8wz/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.customer_registration didn't return an HttpResponse object. It returned None instead.
[2017-12-23 17:35:00,099][Thread-16:11672][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/15/doarue/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.customer_registration didn't return an HttpResponse object. It returned None instead.
[2017-12-24 10:15:13,984][Thread-10:3740][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/14/tfjx3b/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.customer_registration didn't return an HttpResponse object. It returned None instead.
[2017-12-24 11:24:10,210][Thread-8:8556][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/14/4l0hio/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 32, in customer_registration
    for k, v in customer_form_obj.cleaned_data.items():
RuntimeError: dictionary changed size during iteration
[2017-12-24 13:33:37,868][Thread-8:844][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/upload_identity_photo]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\utils\deprecation.py", line 138, in __call__
    response = self.process_request(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\middleware\common.py", line 63, in process_request
    path = self.get_full_path_with_slash(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\middleware\common.py", line 101, in get_full_path_with_slash
    'url': request.get_host() + new_path,
RuntimeError: You called this URL via POST, but the URL doesn't end in a slash and you have APPEND_SLASH set. Django can't redirect to the slash URL while maintaining POST data. Change your form to point to 127.0.0.1:8000/crm/upload_identity_photo/ (note the trailing slash), or set APPEND_SLASH=False in your Django settings.
[2017-12-24 15:58:58,008][Thread-4:11640][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/upload_identity_photo/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 62, in upload_identity_photo
    with open(os.path.join(identity_photo_path, "%s%s" % (now(), file_obj.name)), "wb") as f:
OSError: [Errno 22] Invalid argument: 'D:\\GIT\\HomeWork\\day24\\PerfectCRM\\enrolled_data\\14\\2017-12-24 07:58:58.008505+00:0050c43e904cf22.jpg'
[2017-12-24 16:14:39,954][Thread-6:16508][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 82, in enrollment
    customer_alldetail_modelform_obj = forms.CustomerAllDetailModelForm(instance=customer_obj)
AttributeError: module 'crm.forms' has no attribute 'CustomerAllDetailModelForm'
[2017-12-26 20:25:42,574][Thread-5:12120][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/download_identity_photo/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.download_identity_photo didn't return an HttpResponse object. It returned None instead.
[2017-12-26 20:29:03,979][Thread-5:1584][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/download_identity_photo/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.download_identity_photo didn't return an HttpResponse object. It returned None instead.
[2017-12-26 20:45:44,864][Thread-5:9384][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/download_identity_photo/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.download_identity_photo didn't return an HttpResponse object. It returned None instead.
[2017-12-26 20:48:02,559][Thread-5:3768][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/download_identity_photo/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.download_identity_photo didn't return an HttpResponse object. It returned None instead.
[2017-12-26 21:00:07,442][Thread-5:8656][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/download_identity_photo/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 79, in download_identity_photo
    identity_photo_path = os.path.join(settings.ENROLLED_DATA_DIR, enrollment_obj.id)  # 客户身份证照片存放地址
  File "D:\Software\Anaconda\envs\py3-django\lib\ntpath.py", line 114, in join
    genericpath._check_arg_types('join', path, *paths)
  File "D:\Software\Anaconda\envs\py3-django\lib\genericpath.py", line 149, in _check_arg_types
    (funcname, s.__class__.__name__)) from None
TypeError: join() argument must be str or bytes, not 'int'
[2017-12-26 21:00:13,444][Thread-6:5544][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/download_identity_photo/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 79, in download_identity_photo
    identity_photo_path = os.path.join(settings.ENROLLED_DATA_DIR, enrollment_obj.id)  # 客户身份证照片存放地址
  File "D:\Software\Anaconda\envs\py3-django\lib\ntpath.py", line 114, in join
    genericpath._check_arg_types('join', path, *paths)
  File "D:\Software\Anaconda\envs\py3-django\lib\genericpath.py", line 149, in _check_arg_types
    (funcname, s.__class__.__name__)) from None
TypeError: join() argument must be str or bytes, not 'int'
[2017-12-26 21:03:56,179][Thread-5:7616][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/download_identity_photo/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 80, in download_identity_photo
    file_path = os.path.join(identity_photo_path, file_name)
  File "D:\Software\Anaconda\envs\py3-django\lib\ntpath.py", line 114, in join
    genericpath._check_arg_types('join', path, *paths)
  File "D:\Software\Anaconda\envs\py3-django\lib\genericpath.py", line 149, in _check_arg_types
    (funcname, s.__class__.__name__)) from None
TypeError: join() argument must be str or bytes, not 'NoneType'
[2017-12-30 13:10:47,150][Thread-5:4816][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/show_contract/1/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 117, in show_contract
    customer_obj = enrollment_obj.customer  # 通过报名对象获取客户对象
AttributeError: 'NoneType' object has no attribute 'customer'
[2017-12-30 13:54:31,332][Thread-18:12628][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\contrib\auth\decorators.py", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 205, in enrollment
    "enrollment_form_obj": enrollment_form_obj,
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\shortcuts.py", line 30, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader.py", line 67, in render_to_string
    template = get_template(template_name, using=using)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader.py", line 21, in get_template
    return engine.get_template(template_name)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\backends\django.py", line 39, in get_template
    return Template(self.engine.get_template(template_name), self)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\engine.py", line 162, in get_template
    template, origin = self.find_template(template_name)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\engine.py", line 136, in find_template
    name, template_dirs=dirs, skip=skip,
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loaders\base.py", line 44, in get_template
    contents, origin, origin.template_name, self.engine,
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 191, in __init__
    self.nodelist = self.compile_nodelist()
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 230, in compile_nodelist
    return parser.parse()
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 515, in parse
    raise self.error(token, e)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 513, in parse
    compiled_result = compile_func(self, token)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 312, in do_extends
    nodelist = parser.parse()
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 515, in parse
    raise self.error(token, e)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 513, in parse
    compiled_result = compile_func(self, token)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 255, in do_block
    nodelist = parser.parse(('endblock',))
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 482, in parse
    raise self.error(token, 'Empty variable tag on line %d' % token.lineno)
django.template.exceptions.TemplateSyntaxError: Empty variable tag on line 182
[2017-12-30 14:22:38,620][Thread-6:5444][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
sqlite3.IntegrityError: NOT NULL constraint failed: crm_payment.consultant_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\contrib\auth\decorators.py", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 209, in enrollment
    payment_form_obj.save()
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\forms\models.py", line 463, in save
    self.instance.save()
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 807, in save
    force_update=force_update, update_fields=update_fields)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 837, in save_base
    updated = self._save_table(raw, cls, force_insert, force_update, using, update_fields)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 923, in _save_table
    result = self._do_insert(cls._base_manager, using, fields, update_pk, raw)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 962, in _do_insert
    using=using, raw=raw)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 1076, in _insert
    return query.get_compiler(using=using).execute_sql(return_id)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\compiler.py", line 1099, in execute_sql
    cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 80, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\utils.py", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\utils\six.py", line 685, in reraise
    raise value.with_traceback(tb)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.IntegrityError: NOT NULL constraint failed: crm_payment.consultant_id
[2017-12-30 16:11:45,186][Thread-1:1468][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /kind_admin/crm/customerfollowup/add/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\permissions\permission.py", line 75, in inner
    response = func(request, *args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\contrib\auth\decorators.py", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\kind_admin\views.py", line 93, in table_add
    "table_name": table_name,
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\shortcuts.py", line 30, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader.py", line 68, in render_to_string
    return template.render(context, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\backends\django.py", line 66, in render
    return self.template.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 207, in render
    return self._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\library.py", line 203, in render
    output = self.func(*resolved_args, **resolved_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\kind_admin\templatetags\tags.py", line 296, in get_all_error
    return model_form_obj.errors.get("__all__", "")
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\forms\forms.py", line 175, in errors
    self.full_clean()
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\forms\forms.py", line 384, in full_clean
    self._clean_fields()
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\forms\forms.py", line 396, in _clean_fields
    value = field.widget.value_from_datadict(self.data, self.files, self.add_prefix(name))
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\forms\widgets.py", line 639, in value_from_datadict
    getter = data.get
AttributeError: 'generator' object has no attribute 'get'
[2017-12-30 16:17:36,684][Thread-3:4772][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /kind_admin/crm/customer/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\options.py", line 617, in get_field
    return self.fields_map[field_name]
KeyError: 'add_customer_followup'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\GIT\HomeWork\day24\PerfectCRM\kind_admin\templatetags\tags.py", line 69, in get_table_rows
    field_obj = obj._meta.get_field(column)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\options.py", line 619, in get_field
    raise FieldDoesNotExist("%s has no field named '%s'" % (self.object_name, field_name))
django.core.exceptions.FieldDoesNotExist: Customer has no field named 'add_customer_followup'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\permissions\permission.py", line 75, in inner
    response = func(request, *args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\contrib\auth\decorators.py", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\kind_admin\views.py", line 57, in table_objs
    "search_content": request.GET.get("_q", ""),
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\shortcuts.py", line 30, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader.py", line 68, in render_to_string
    return template.render(context, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\backends\django.py", line 66, in render
    return self.template.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 207, in render
    return self._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\defaulttags.py", line 216, in render
    nodelist.append(node.render_annotated(context))
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\library.py", line 203, in render
    output = self.func(*resolved_args, **resolved_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\kind_admin\templatetags\tags.py", line 116, in get_table_rows
    column_data = getattr(admin_class, column)()
  File "D:\GIT\HomeWork\day24\PerfectCRM\kind_admin\kind_admin.py", line 80, in add_customer_followup
    点击添加</a>""" % (self.instance)
TypeError: not enough arguments for format string
[2018-01-04 21:16:36,053][Thread-46:6492][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /kind_admin/crm/courserecord/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\permissions\permission.py", line 75, in inner
    response = func(request, *args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\contrib\auth\decorators.py", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\kind_admin\views.py", line 46, in table_objs
    contact_list = admin_class.model.objects.filter(**condition_dict).order_by(
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 784, in filter
    return self._filter_or_exclude(False, *args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 802, in _filter_or_exclude
    clone.query.add_q(Q(*args, **kwargs))
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\query.py", line 1250, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\query.py", line 1276, in _add_q
    allow_joins=allow_joins, split_subq=split_subq,
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\query.py", line 1154, in build_filter
    lookups, parts, reffed_expression = self.solve_lookup_type(arg)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\query.py", line 1034, in solve_lookup_type
    _, field, _, lookup_parts = self.names_to_path(lookup_splitted, self.get_meta())
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\query.py", line 1352, in names_to_path
    "Choices are: %s" % (name, ", ".join(available)))
django.core.exceptions.FieldError: Cannot resolve keyword 'classlist_id' into field. Choices are: date, day_num, from_class, from_class_id, has_homework, homework_content, homework_title, id, outline, studyrecord, teacher, teacher_id
[2018-01-04 21:16:41,498][Thread-47:6644][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /kind_admin/crm/courserecord/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\permissions\permission.py", line 75, in inner
    response = func(request, *args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\contrib\auth\decorators.py", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\kind_admin\views.py", line 46, in table_objs
    contact_list = admin_class.model.objects.filter(**condition_dict).order_by(
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 784, in filter
    return self._filter_or_exclude(False, *args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 802, in _filter_or_exclude
    clone.query.add_q(Q(*args, **kwargs))
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\query.py", line 1250, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\query.py", line 1276, in _add_q
    allow_joins=allow_joins, split_subq=split_subq,
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\query.py", line 1154, in build_filter
    lookups, parts, reffed_expression = self.solve_lookup_type(arg)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\query.py", line 1034, in solve_lookup_type
    _, field, _, lookup_parts = self.names_to_path(lookup_splitted, self.get_meta())
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\query.py", line 1352, in names_to_path
    "Choices are: %s" % (name, ", ".join(available)))
django.core.exceptions.FieldError: Cannot resolve keyword 'classlist' into field. Choices are: date, day_num, from_class, from_class_id, has_homework, homework_content, homework_title, id, outline, studyrecord, teacher, teacher_id
[2018-01-06 15:10:11,855][Thread-1:2464][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /kind_admin/crm/courserecord/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.permissions.permission.inner didn't return an HttpResponse object. It returned None instead.
[2018-01-06 15:26:13,671][Thread-136:17252][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /kind_admin/crm/courserecord/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
sqlite3.IntegrityError: UNIQUE constraint failed: crm_studyrecord.student_id, crm_studyrecord.course_record_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\crm\permissions\permission.py", line 75, in inner
    response = func(request, *args, **kwargs)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\contrib\auth\decorators.py", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\kind_admin\views.py", line 32, in table_objs
    return func(admin_class, request, querysets)  # 有则直接运行该函数并返回
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\kind_admin\kind_admin.py", line 142, in create_study_record
    models.StudyRecord.objects.bulk_create(study_record_obj_list)  # 批量生成学习记录
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\models\query.py", line 443, in bulk_create
    ids = self._batched_insert(objs_without_pk, fields, batch_size)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\models\query.py", line 1099, in _batched_insert
    self._insert(item, fields=fields, using=self.db)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\models\query.py", line 1076, in _insert
    return query.get_compiler(using=using).execute_sql(return_id)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\models\sql\compiler.py", line 1099, in execute_sql
    cursor.execute(sql, params)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\backends\utils.py", line 80, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\utils.py", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\utils\six.py", line 685, in reraise
    raise value.with_traceback(tb)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.IntegrityError: UNIQUE constraint failed: crm_studyrecord.student_id, crm_studyrecord.course_record_id
[2018-01-06 15:39:21,592][Thread-88:4132][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /kind_admin/crm/courserecord/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
sqlite3.IntegrityError: UNIQUE constraint failed: crm_studyrecord.student_id, crm_studyrecord.course_record_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\crm\permissions\permission.py", line 75, in inner
    response = func(request, *args, **kwargs)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\contrib\auth\decorators.py", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\kind_admin\views.py", line 32, in table_objs
    return func(admin_class, request, querysets)  # 有则直接运行该函数并返回
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\kind_admin\kind_admin.py", line 142, in create_study_record
    models.StudyRecord.objects.bulk_create(study_record_obj_list)  # 批量生成学习记录
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\models\query.py", line 443, in bulk_create
    ids = self._batched_insert(objs_without_pk, fields, batch_size)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\models\query.py", line 1099, in _batched_insert
    self._insert(item, fields=fields, using=self.db)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\models\query.py", line 1076, in _insert
    return query.get_compiler(using=using).execute_sql(return_id)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\models\sql\compiler.py", line 1099, in execute_sql
    cursor.execute(sql, params)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\backends\utils.py", line 80, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\utils.py", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\utils\six.py", line 685, in reraise
    raise value.with_traceback(tb)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.IntegrityError: UNIQUE constraint failed: crm_studyrecord.student_id, crm_studyrecord.course_record_id
[2018-01-08 21:02:01,490][Thread-96:6196][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /kind_admin/crm/courserecord/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
sqlite3.IntegrityError: UNIQUE constraint failed: crm_studyrecord.student_id, crm_studyrecord.course_record_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\permissions\permission.py", line 75, in inner
    response = func(request, *args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\contrib\auth\decorators.py", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\kind_admin\views.py", line 32, in table_objs
    return func(admin_class, request, querysets)  # 有则直接运行该函数并返回
  File "D:\GIT\HomeWork\day24\PerfectCRM\kind_admin\kind_admin.py", line 142, in create_study_record
    models.StudyRecord.objects.bulk_create(study_record_obj_list)  # 批量生成学习记录
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 443, in bulk_create
    ids = self._batched_insert(objs_without_pk, fields, batch_size)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 1099, in _batched_insert
    self._insert(item, fields=fields, using=self.db)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 1076, in _insert
    return query.get_compiler(using=using).execute_sql(return_id)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\compiler.py", line 1099, in execute_sql
    cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 80, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\utils.py", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\utils\six.py", line 685, in reraise
    raise value.with_traceback(tb)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.IntegrityError: UNIQUE constraint failed: crm_studyrecord.student_id, crm_studyrecord.course_record_id
[2018-01-08 21:44:46,764][Thread-26:11544][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /kind_admin/crm/courserecord/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
sqlite3.IntegrityError: UNIQUE constraint failed: crm_studyrecord.student_id, crm_studyrecord.course_record_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\permissions\permission.py", line 75, in inner
    response = func(request, *args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\contrib\auth\decorators.py", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\kind_admin\views.py", line 32, in table_objs
    return func(admin_class, request, querysets)  # 有则直接运行该函数并返回
  File "D:\GIT\HomeWork\day24\PerfectCRM\kind_admin\kind_admin.py", line 143, in create_study_record
    models.StudyRecord.objects.bulk_create(study_record_obj_list)  # 批量生成学习记录
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 443, in bulk_create
    ids = self._batched_insert(objs_without_pk, fields, batch_size)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 1099, in _batched_insert
    self._insert(item, fields=fields, using=self.db)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 1076, in _insert
    return query.get_compiler(using=using).execute_sql(return_id)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\compiler.py", line 1099, in execute_sql
    cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 80, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\utils.py", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\utils\six.py", line 685, in reraise
    raise value.with_traceback(tb)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.IntegrityError: UNIQUE constraint failed: crm_studyrecord.student_id, crm_studyrecord.course_record_id
[2018-01-08 21:45:26,351][Thread-1:8940][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /kind_admin/crm/courserecord/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
sqlite3.IntegrityError: UNIQUE constraint failed: crm_studyrecord.student_id, crm_studyrecord.course_record_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\permissions\permission.py", line 75, in inner
    response = func(request, *args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\contrib\auth\decorators.py", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\kind_admin\views.py", line 32, in table_objs
    return func(admin_class, request, querysets)  # 有则直接运行该函数并返回
  File "D:\GIT\HomeWork\day24\PerfectCRM\kind_admin\kind_admin.py", line 144, in create_study_record
    models.StudyRecord.objects.bulk_create(study_record_obj_list)  # 批量生成学习记录
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 443, in bulk_create
    ids = self._batched_insert(objs_without_pk, fields, batch_size)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 1099, in _batched_insert
    self._insert(item, fields=fields, using=self.db)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 1076, in _insert
    return query.get_compiler(using=using).execute_sql(return_id)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\compiler.py", line 1099, in execute_sql
    cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 80, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\utils.py", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\utils\six.py", line 685, in reraise
    raise value.with_traceback(tb)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.IntegrityError: UNIQUE constraint failed: crm_studyrecord.student_id, crm_studyrecord.course_record_id
[2018-01-09 20:59:07,180][Thread-15:13140][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/my_classes/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\student\views.py", line 12, in my_classes
    return render(request, "student/my_classes.html")
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\shortcuts.py", line 30, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader.py", line 68, in render_to_string
    return template.render(context, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\backends\django.py", line 66, in render
    return self.template.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 207, in render
    return self._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\library.py", line 203, in render
    output = self.func(*resolved_args, **resolved_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\templatetags\crm_tags.py", line 30, in get_page_ele
    if query_sets.has_previous():
AttributeError: 'str' object has no attribute 'has_previous'
[2018-01-09 21:01:50,428][Thread-35:1884][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/my_classes/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\student\views.py", line 12, in my_classes
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\shortcuts.py", line 30, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader.py", line 68, in render_to_string
    return template.render(context, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\backends\django.py", line 66, in render
    return self.template.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 207, in render
    return self._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\library.py", line 203, in render
    output = self.func(*resolved_args, **resolved_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\templatetags\crm_tags.py", line 30, in get_page_ele
    if query_sets.has_previous():
AttributeError: 'str' object has no attribute 'has_previous'
[2018-01-09 21:10:51,205][Thread-12:6996][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/my_classes/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\student\views.py", line 13, in my_classes
    return render(request, "student/my_classes.html")
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\shortcuts.py", line 30, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader.py", line 68, in render_to_string
    return template.render(context, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\backends\django.py", line 66, in render
    return self.template.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 207, in render
    return self._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\library.py", line 203, in render
    output = self.func(*resolved_args, **resolved_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\templatetags\crm_tags.py", line 30, in get_page_ele
    if query_sets.has_previous():
AttributeError: 'str' object has no attribute 'has_previous'
[2018-01-09 21:12:00,932][Thread-1:7376][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/my_classes/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\student\views.py", line 12, in my_classes
    print(request.user.user_info.enrollment_set.all())
AttributeError: 'RelatedManager' object has no attribute 'enrollment_set'
[2018-01-09 21:12:21,987][Thread-4:11952][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/my_classes/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\student\views.py", line 13, in my_classes
    return render(request, "student/my_classes.html")
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\shortcuts.py", line 30, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader.py", line 68, in render_to_string
    return template.render(context, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\backends\django.py", line 66, in render
    return self.template.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 207, in render
    return self._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\library.py", line 203, in render
    output = self.func(*resolved_args, **resolved_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\templatetags\crm_tags.py", line 30, in get_page_ele
    if query_sets.has_previous():
AttributeError: 'str' object has no attribute 'has_previous'
[2018-01-09 21:12:52,347][Thread-1:13536][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/my_classes/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\student\views.py", line 13, in my_classes
    return render(request, "student/my_classes.html")
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\shortcuts.py", line 30, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader.py", line 68, in render_to_string
    return template.render(context, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\backends\django.py", line 66, in render
    return self.template.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 207, in render
    return self._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\library.py", line 203, in render
    output = self.func(*resolved_args, **resolved_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\templatetags\crm_tags.py", line 30, in get_page_ele
    if query_sets.has_previous():
AttributeError: 'str' object has no attribute 'has_previous'
[2018-01-09 21:30:26,420][Thread-1:712][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/my_classes/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\student\views.py", line 13, in my_classes
    return render(request, "student/my_classes.html")
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\shortcuts.py", line 30, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader.py", line 68, in render_to_string
    return template.render(context, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\backends\django.py", line 66, in render
    return self.template.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 207, in render
    return self._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\library.py", line 203, in render
    output = self.func(*resolved_args, **resolved_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\templatetags\crm_tags.py", line 30, in get_page_ele
    if query_sets.has_previous():
AttributeError: 'str' object has no attribute 'has_previous'
[2018-01-09 21:30:44,127][Thread-1:8320][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/my_classes/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\student\views.py", line 13, in my_classes
    return render(request, "student/my_classes.html")
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\shortcuts.py", line 30, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader.py", line 68, in render_to_string
    return template.render(context, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\backends\django.py", line 66, in render
    return self.template.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 207, in render
    return self._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\library.py", line 203, in render
    output = self.func(*resolved_args, **resolved_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\templatetags\crm_tags.py", line 30, in get_page_ele
    if query_sets.has_previous():
AttributeError: 'str' object has no attribute 'has_previous'
[2018-01-09 21:33:10,003][Thread-1:6856][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/my_classes/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\student\views.py", line 12, in my_classes
    contact_list = request.user.stu_info.enrollment_set.enrolled_class.all()
AttributeError: 'RelatedManager' object has no attribute 'enrolled_class'
[2018-01-14 14:05:28,903][Thread-74:4300][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/my_classes/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\student\views.py", line 13, in my_classes
    enrollment_list = request.user.stu_info.enrollment_set.all()
AttributeError: 'NoneType' object has no attribute 'enrollment_set'
[2018-01-14 14:06:40,612][Thread-7:14416][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/my_classes/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\student\views.py", line 13, in my_classes
    enrollment_list = request.user.stu_info.enrollment_set.all()
AttributeError: 'NoneType' object has no attribute 'enrollment_set'
[2018-01-14 14:16:32,632][Thread-3:12564][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/my_class_course_record/1/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view student.views.my_class_course_record didn't return an HttpResponse object. It returned None instead.
[2018-01-14 15:52:08,291][Thread-3:15320][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/my_class_course_record/1/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\query.py", line 1645, in add_fields
    name.split(LOOKUP_SEP), opts, alias, allow_many=allow_m2m)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\query.py", line 1417, in setup_joins
    names, opts, allow_many, fail_on_missing=True)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\query.py", line 1352, in names_to_path
    "Choices are: %s" % (name, ", ".join(available)))
django.core.exceptions.FieldError: Cannot resolve keyword 'score' into field. Choices are: date, day_num, from_class, from_class_id, has_homework, homework_content, homework_title, id, outline, studyrecord, teacher, teacher_id

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\student\views.py", line 40, in my_class_course_record
    ).values('score').annotate(c=sum('score'))
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 697, in values
    clone = self._values(*fields, **expressions)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 692, in _values
    clone.query.set_values(fields)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\query.py", line 1896, in set_values
    self.add_fields(field_names, True)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\query.py", line 1659, in add_fields
    "Choices are: %s" % (name, ", ".join(names)))
django.core.exceptions.FieldError: Cannot resolve keyword 'score' into field. Choices are: date, day_num, from_class, from_class_id, has_homework, homework_content, homework_title, id, outline, studyrecord, teacher, teacher_id
[2018-01-14 15:53:32,161][Thread-1:14984][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/my_class_course_record/1/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\student\views.py", line 38, in my_class_course_record
    user_score = models.StudyRecord.objects.filter(student=enrollment_obj).values('score').annotate(c=sum('score'))
TypeError: unsupported operand type(s) for +: 'int' and 'str'
[2018-01-14 15:53:34,531][Thread-3:10908][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/my_class_course_record/1/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\student\views.py", line 38, in my_class_course_record
    user_score = models.StudyRecord.objects.filter(student=enrollment_obj).values('score').annotate(c=sum('score'))
TypeError: unsupported operand type(s) for +: 'int' and 'str'
[2018-01-14 15:53:35,401][Thread-4:7612][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/my_class_course_record/1/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\student\views.py", line 38, in my_class_course_record
    user_score = models.StudyRecord.objects.filter(student=enrollment_obj).values('score').annotate(c=sum('score'))
TypeError: unsupported operand type(s) for +: 'int' and 'str'
[2018-01-28 15:11:39,094][Thread-4:9020][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/upload_homework/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\student\views.py", line 93, in upload_homework
    course_record_id, study_record_id
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\ntpath.py", line 114, in join
    genericpath._check_arg_types('join', path, *paths)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\genericpath.py", line 149, in _check_arg_types
    (funcname, s.__class__.__name__)) from None
TypeError: join() argument must be str or bytes, not 'int'
[2018-01-28 15:46:27,015][Thread-4:7912][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/upload_homework/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\student\views.py", line 114, in upload_homework
    "st_mtime": datetime.strftime("%Y-%m-%d %H:%M:%S", time.localtime(homework_file_stat.st_mtime))
TypeError: descriptor 'strftime' requires a 'datetime.date' object but received a 'str'
[2018-01-28 16:36:49,528][Thread-3:8200][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/delete_homework/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view student.views.delete_homework didn't return an HttpResponse object. It returned None instead.
[2018-01-28 16:38:57,362][Thread-1:13924][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/delete_homework/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view student.views.delete_homework didn't return an HttpResponse object. It returned None instead.
[2018-01-28 16:44:44,057][Thread-16:13656][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/delete_homework/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\student\views.py", line 151, in delete_homework
    os.remove(homework_file_path)
FileNotFoundError: [WinError 2] 系统找不到指定的文件。: 'C:\\Git\\PythonHomeWork\\day24\\PerfectCRM\\student_homework\\4\\2\\10\\getstarted-error-page.htmlgetstarted-login-page.html'
[2018-01-28 16:44:45,420][Thread-17:576][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/delete_homework/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\student\views.py", line 151, in delete_homework
    os.remove(homework_file_path)
FileNotFoundError: [WinError 2] 系统找不到指定的文件。: 'C:\\Git\\PythonHomeWork\\day24\\PerfectCRM\\student_homework\\4\\2\\10\\getstarted-error-page.htmlgetstarted-login-page.html'
[2018-01-28 16:44:46,074][Thread-18:6928][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/delete_homework/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\student\views.py", line 151, in delete_homework
    os.remove(homework_file_path)
FileNotFoundError: [WinError 2] 系统找不到指定的文件。: 'C:\\Git\\PythonHomeWork\\day24\\PerfectCRM\\student_homework\\4\\2\\10\\getstarted-error-page.htmlgetstarted-login-page.html'
[2018-01-28 16:45:30,724][Thread-20:6648][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/delete_homework/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\student\views.py", line 151, in delete_homework
    os.remove(homework_file_path)
FileNotFoundError: [WinError 2] 系统找不到指定的文件。: 'C:\\Git\\PythonHomeWork\\day24\\PerfectCRM\\student_homework\\4\\2\\10\\getstarted-error-page.htmlgetstarted-login-page.html'
[2018-01-28 17:02:23,747][Thread-70:8012][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/homework_detail/5/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\student\views.py", line 81, in homework_detail
    all_homework_files_name_list = os.listdir(student_homework_abspath)  # 学员已经上传的本次所有作业文件名称
FileNotFoundError: [WinError 3] 系统找不到指定的路径。: 'C:\\Git\\PythonHomeWork\\day24\\PerfectCRM\\student_homework\\4\\1\\5'
[2018-02-03 13:20:26,238][Thread-3:8524][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/download_homework/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view student.views.download_homework didn't return an HttpResponse object. It returned None instead.
[2018-02-03 13:32:38,129][Thread-9:3944][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/delete_homework/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\student\views.py", line 152, in delete_homework
    os.remove(homework_file_path)
FileNotFoundError: [WinError 2] 系统找不到指定的文件。: 'C:\\Git\\PythonHomeWork\\day24\\PerfectCRM\\student_homework\\4\\1\\5\\244'
[2018-02-03 13:32:39,324][Thread-10:2892][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/delete_homework/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\student\views.py", line 152, in delete_homework
    os.remove(homework_file_path)
FileNotFoundError: [WinError 2] 系统找不到指定的文件。: 'C:\\Git\\PythonHomeWork\\day24\\PerfectCRM\\student_homework\\4\\1\\5\\244'
[2018-02-03 13:32:39,874][Thread-11:8472][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/delete_homework/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\student\views.py", line 152, in delete_homework
    os.remove(homework_file_path)
FileNotFoundError: [WinError 2] 系统找不到指定的文件。: 'C:\\Git\\PythonHomeWork\\day24\\PerfectCRM\\student_homework\\4\\1\\5\\244'
[2018-02-03 13:32:40,065][Thread-12:3076][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/delete_homework/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\student\views.py", line 152, in delete_homework
    os.remove(homework_file_path)
FileNotFoundError: [WinError 2] 系统找不到指定的文件。: 'C:\\Git\\PythonHomeWork\\day24\\PerfectCRM\\student_homework\\4\\1\\5\\244'
[2018-02-03 13:32:40,252][Thread-13:2680][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/delete_homework/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\student\views.py", line 152, in delete_homework
    os.remove(homework_file_path)
FileNotFoundError: [WinError 2] 系统找不到指定的文件。: 'C:\\Git\\PythonHomeWork\\day24\\PerfectCRM\\student_homework\\4\\1\\5\\244'
[2018-02-03 13:32:40,439][Thread-14:14932][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/delete_homework/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\student\views.py", line 152, in delete_homework
    os.remove(homework_file_path)
FileNotFoundError: [WinError 2] 系统找不到指定的文件。: 'C:\\Git\\PythonHomeWork\\day24\\PerfectCRM\\student_homework\\4\\1\\5\\244'
[2018-02-03 13:33:04,852][Thread-17:15992][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/delete_homework/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\student\views.py", line 152, in delete_homework
    os.remove(homework_file_path)
FileNotFoundError: [WinError 2] 系统找不到指定的文件。: 'C:\\Git\\PythonHomeWork\\day24\\PerfectCRM\\student_homework\\4\\1\\5\\244'
[2018-02-03 15:50:36,360][Thread-5:10148][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/download_homework/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\student\views.py", line 171, in download_homework
    settings.STUDENT_HOMEWORK_DIR, str(request.user.stu_info.id),
AttributeError: 'NoneType' object has no attribute 'id'
[2018-02-03 15:52:35,167][Thread-73:15188][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/download_homework/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\student\views.py", line 171, in download_homework
    settings.STUDENT_HOMEWORK_DIR, str(request.user.stu_info.id),
AttributeError: 'NoneType' object has no attribute 'id'
[2018-02-03 15:55:19,591][Thread-1:6640][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/download_homework/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\student\views.py", line 171, in download_homework
    settings.STUDENT_HOMEWORK_DIR, str(request.user.stu_info.id),
AttributeError: 'NoneType' object has no attribute 'id'
[2018-02-03 15:56:05,181][Thread-5:11536][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /student/download_homework/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\student\views.py", line 171, in download_homework
    settings.STUDENT_HOMEWORK_DIR, str(request.user.stu_info.id),
AttributeError: 'NoneType' object has no attribute 'id'
[2018-02-03 16:41:21,435][Thread-1:3676][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /kind_admin/crm/customer/]
Traceback (most recent call last):
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\crm\permissions\permission.py", line 75, in inner
    response = func(request, *args, **kwargs)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\contrib\auth\decorators.py", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\kind_admin\views.py", line 57, in table_objs
    "search_content": request.GET.get("_q", ""),
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\shortcuts.py", line 30, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\loader.py", line 68, in render_to_string
    return template.render(context, request)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\backends\django.py", line 66, in render
    return self.template.render(context)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\base.py", line 207, in render
    return self._render(context)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\defaulttags.py", line 216, in render
    nodelist.append(node.render_annotated(context))
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "C:\Users\lingx\AppData\Local\Continuum\anaconda3\envs\py3-dj\lib\site-packages\django\template\library.py", line 203, in render
    output = self.func(*resolved_args, **resolved_kwargs)
  File "C:\Git\PythonHomeWork\day24\PerfectCRM\kind_admin\templatetags\tags.py", line 76, in get_table_rows
    admin_class.field_color[column].get(column_value)[0],
TypeError: 'NoneType' object is not subscriptable
