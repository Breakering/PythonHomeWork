[2017-12-23 16:09:44,354][Thread-20:15584][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
sqlite3.IntegrityError: UNIQUE constraint failed: crm_enrollment.customer_id, crm_enrollment.enrolled_class_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 33, in enrollment
    consultant=customer_obj.consultant,
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 394, in create
    obj.save(force_insert=True, using=self.db)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 807, in save
    force_update=force_update, update_fields=update_fields)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 837, in save_base
    updated = self._save_table(raw, cls, force_insert, force_update, using, update_fields)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 923, in _save_table
    result = self._do_insert(cls._base_manager, using, fields, update_pk, raw)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 962, in _do_insert
    using=using, raw=raw)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 1076, in _insert
    return query.get_compiler(using=using).execute_sql(return_id)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\compiler.py", line 1099, in execute_sql
    cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 80, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\utils.py", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\utils\six.py", line 685, in reraise
    raise value.with_traceback(tb)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.IntegrityError: UNIQUE constraint failed: crm_enrollment.customer_id, crm_enrollment.enrolled_class_id
[2017-12-23 16:18:59,083][Thread-17:14500][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
sqlite3.IntegrityError: UNIQUE constraint failed: crm_enrollment.customer_id, crm_enrollment.enrolled_class_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 33, in enrollment
    consultant=customer_obj.consultant,
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 394, in create
    obj.save(force_insert=True, using=self.db)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 807, in save
    force_update=force_update, update_fields=update_fields)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 837, in save_base
    updated = self._save_table(raw, cls, force_insert, force_update, using, update_fields)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 923, in _save_table
    result = self._do_insert(cls._base_manager, using, fields, update_pk, raw)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 962, in _do_insert
    using=using, raw=raw)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 1076, in _insert
    return query.get_compiler(using=using).execute_sql(return_id)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\compiler.py", line 1099, in execute_sql
    cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 80, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\utils.py", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\utils\six.py", line 685, in reraise
    raise value.with_traceback(tb)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.IntegrityError: UNIQUE constraint failed: crm_enrollment.customer_id, crm_enrollment.enrolled_class_id
[2017-12-23 16:19:58,686][Thread-4:16316][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
sqlite3.IntegrityError: UNIQUE constraint failed: crm_enrollment.customer_id, crm_enrollment.enrolled_class_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 33, in enrollment
    consultant=customer_obj.consultant,
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 394, in create
    obj.save(force_insert=True, using=self.db)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 807, in save
    force_update=force_update, update_fields=update_fields)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 837, in save_base
    updated = self._save_table(raw, cls, force_insert, force_update, using, update_fields)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 923, in _save_table
    result = self._do_insert(cls._base_manager, using, fields, update_pk, raw)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 962, in _do_insert
    using=using, raw=raw)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 1076, in _insert
    return query.get_compiler(using=using).execute_sql(return_id)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\compiler.py", line 1099, in execute_sql
    cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 80, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\utils.py", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\utils\six.py", line 685, in reraise
    raise value.with_traceback(tb)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.IntegrityError: UNIQUE constraint failed: crm_enrollment.customer_id, crm_enrollment.enrolled_class_id
[2017-12-23 16:22:31,053][Thread-3:15844][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 42, in enrollment
    return HttpResponse(json.dumps(ret))
  File "D:\Software\Anaconda\envs\py3-django\lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
  File "D:\Software\Anaconda\envs\py3-django\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "D:\Software\Anaconda\envs\py3-django\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "D:\Software\Anaconda\envs\py3-django\lib\json\encoder.py", line 180, in default
    o.__class__.__name__)
TypeError: Object of type 'dict_items' is not JSON serializable
[2017-12-23 16:24:11,652][Thread-3:11808][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 42, in enrollment
    print(dict(enrollment_form_obj.errors.as_data))
TypeError: 'method' object is not iterable
[2017-12-23 16:24:59,652][Thread-3:16128][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 42, in enrollment
    print(json.loads(enrollment_form_obj.errors.as_json))
  File "D:\Software\Anaconda\envs\py3-django\lib\json\__init__.py", line 348, in loads
    'not {!r}'.format(s.__class__.__name__))
TypeError: the JSON object must be str, bytes or bytearray, not 'method'
[2017-12-23 16:51:00,800][Thread-11:440][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 51, in enrollment
    "enrollment_form_obj": enrollment_form_obj,
UnboundLocalError: local variable 'enrollment_form_obj' referenced before assignment
[2017-12-23 16:51:01,761][Thread-12:16368][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 51, in enrollment
    "enrollment_form_obj": enrollment_form_obj,
UnboundLocalError: local variable 'enrollment_form_obj' referenced before assignment
[2017-12-23 17:31:34,652][Thread-1:15788][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/15/fiy8wz/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
TypeError: customer_registration() got multiple values for argument 'enrollment_id'
[2017-12-23 17:31:50,946][Thread-8:15028][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/15/fiy8wz/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
TypeError: customer_registration() got multiple values for argument 'enrollment_id'
[2017-12-23 17:31:55,569][Thread-9:11008][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/15/fiy8wz/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
TypeError: customer_registration() got multiple values for argument 'enrollment_id'
[2017-12-23 17:32:08,962][Thread-13:15000][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/15/fiy8wz/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
TypeError: customer_registration() got multiple values for argument 'enrollment_id'
[2017-12-23 17:32:10,387][Thread-1:7044][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/15/fiy8wz/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.customer_registration didn't return an HttpResponse object. It returned None instead.
[2017-12-23 17:32:11,352][Thread-3:16160][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/15/fiy8wz/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.customer_registration didn't return an HttpResponse object. It returned None instead.
[2017-12-23 17:32:12,272][Thread-4:10956][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/15/fiy8wz/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.customer_registration didn't return an HttpResponse object. It returned None instead.
[2017-12-23 17:32:13,079][Thread-5:15544][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/15/fiy8wz/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.customer_registration didn't return an HttpResponse object. It returned None instead.
[2017-12-23 17:32:18,356][Thread-1:12996][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/15/fiy8wz/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.customer_registration didn't return an HttpResponse object. It returned None instead.
[2017-12-23 17:35:00,099][Thread-16:11672][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/15/doarue/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.customer_registration didn't return an HttpResponse object. It returned None instead.
[2017-12-24 10:15:13,984][Thread-10:3740][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/14/tfjx3b/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.customer_registration didn't return an HttpResponse object. It returned None instead.
[2017-12-24 11:24:10,210][Thread-8:8556][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/customer/registration/14/4l0hio/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 32, in customer_registration
    for k, v in customer_form_obj.cleaned_data.items():
RuntimeError: dictionary changed size during iteration
[2017-12-24 13:33:37,868][Thread-8:844][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/upload_identity_photo]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\utils\deprecation.py", line 138, in __call__
    response = self.process_request(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\middleware\common.py", line 63, in process_request
    path = self.get_full_path_with_slash(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\middleware\common.py", line 101, in get_full_path_with_slash
    'url': request.get_host() + new_path,
RuntimeError: You called this URL via POST, but the URL doesn't end in a slash and you have APPEND_SLASH set. Django can't redirect to the slash URL while maintaining POST data. Change your form to point to 127.0.0.1:8000/crm/upload_identity_photo/ (note the trailing slash), or set APPEND_SLASH=False in your Django settings.
[2017-12-24 15:58:58,008][Thread-4:11640][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/upload_identity_photo/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 62, in upload_identity_photo
    with open(os.path.join(identity_photo_path, "%s%s" % (now(), file_obj.name)), "wb") as f:
OSError: [Errno 22] Invalid argument: 'D:\\GIT\\HomeWork\\day24\\PerfectCRM\\enrolled_data\\14\\2017-12-24 07:58:58.008505+00:0050c43e904cf22.jpg'
[2017-12-24 16:14:39,954][Thread-6:16508][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 82, in enrollment
    customer_alldetail_modelform_obj = forms.CustomerAllDetailModelForm(instance=customer_obj)
AttributeError: module 'crm.forms' has no attribute 'CustomerAllDetailModelForm'
[2017-12-26 20:25:42,574][Thread-5:12120][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/download_identity_photo/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.download_identity_photo didn't return an HttpResponse object. It returned None instead.
[2017-12-26 20:29:03,979][Thread-5:1584][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/download_identity_photo/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.download_identity_photo didn't return an HttpResponse object. It returned None instead.
[2017-12-26 20:45:44,864][Thread-5:9384][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/download_identity_photo/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.download_identity_photo didn't return an HttpResponse object. It returned None instead.
[2017-12-26 20:48:02,559][Thread-5:3768][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/download_identity_photo/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 198, in _get_response
    "returned None instead." % (callback.__module__, view_name)
ValueError: The view crm.views.download_identity_photo didn't return an HttpResponse object. It returned None instead.
[2017-12-26 21:00:07,442][Thread-5:8656][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/download_identity_photo/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 79, in download_identity_photo
    identity_photo_path = os.path.join(settings.ENROLLED_DATA_DIR, enrollment_obj.id)  # 客户身份证照片存放地址
  File "D:\Software\Anaconda\envs\py3-django\lib\ntpath.py", line 114, in join
    genericpath._check_arg_types('join', path, *paths)
  File "D:\Software\Anaconda\envs\py3-django\lib\genericpath.py", line 149, in _check_arg_types
    (funcname, s.__class__.__name__)) from None
TypeError: join() argument must be str or bytes, not 'int'
[2017-12-26 21:00:13,444][Thread-6:5544][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/download_identity_photo/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 79, in download_identity_photo
    identity_photo_path = os.path.join(settings.ENROLLED_DATA_DIR, enrollment_obj.id)  # 客户身份证照片存放地址
  File "D:\Software\Anaconda\envs\py3-django\lib\ntpath.py", line 114, in join
    genericpath._check_arg_types('join', path, *paths)
  File "D:\Software\Anaconda\envs\py3-django\lib\genericpath.py", line 149, in _check_arg_types
    (funcname, s.__class__.__name__)) from None
TypeError: join() argument must be str or bytes, not 'int'
[2017-12-26 21:03:56,179][Thread-5:7616][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/download_identity_photo/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 80, in download_identity_photo
    file_path = os.path.join(identity_photo_path, file_name)
  File "D:\Software\Anaconda\envs\py3-django\lib\ntpath.py", line 114, in join
    genericpath._check_arg_types('join', path, *paths)
  File "D:\Software\Anaconda\envs\py3-django\lib\genericpath.py", line 149, in _check_arg_types
    (funcname, s.__class__.__name__)) from None
TypeError: join() argument must be str or bytes, not 'NoneType'
[2017-12-30 13:10:47,150][Thread-5:4816][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/show_contract/1/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 117, in show_contract
    customer_obj = enrollment_obj.customer  # 通过报名对象获取客户对象
AttributeError: 'NoneType' object has no attribute 'customer'
[2017-12-30 13:54:31,332][Thread-18:12628][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\contrib\auth\decorators.py", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 205, in enrollment
    "enrollment_form_obj": enrollment_form_obj,
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\shortcuts.py", line 30, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader.py", line 67, in render_to_string
    template = get_template(template_name, using=using)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader.py", line 21, in get_template
    return engine.get_template(template_name)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\backends\django.py", line 39, in get_template
    return Template(self.engine.get_template(template_name), self)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\engine.py", line 162, in get_template
    template, origin = self.find_template(template_name)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\engine.py", line 136, in find_template
    name, template_dirs=dirs, skip=skip,
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loaders\base.py", line 44, in get_template
    contents, origin, origin.template_name, self.engine,
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 191, in __init__
    self.nodelist = self.compile_nodelist()
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 230, in compile_nodelist
    return parser.parse()
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 515, in parse
    raise self.error(token, e)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 513, in parse
    compiled_result = compile_func(self, token)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 312, in do_extends
    nodelist = parser.parse()
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 515, in parse
    raise self.error(token, e)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 513, in parse
    compiled_result = compile_func(self, token)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 255, in do_block
    nodelist = parser.parse(('endblock',))
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 482, in parse
    raise self.error(token, 'Empty variable tag on line %d' % token.lineno)
django.template.exceptions.TemplateSyntaxError: Empty variable tag on line 182
[2017-12-30 14:22:38,620][Thread-6:5444][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /crm/sales/enrollment/5/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
sqlite3.IntegrityError: NOT NULL constraint failed: crm_payment.consultant_id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\contrib\auth\decorators.py", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\views.py", line 209, in enrollment
    payment_form_obj.save()
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\forms\models.py", line 463, in save
    self.instance.save()
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 807, in save
    force_update=force_update, update_fields=update_fields)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 837, in save_base
    updated = self._save_table(raw, cls, force_insert, force_update, using, update_fields)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 923, in _save_table
    result = self._do_insert(cls._base_manager, using, fields, update_pk, raw)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\base.py", line 962, in _do_insert
    using=using, raw=raw)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\query.py", line 1076, in _insert
    return query.get_compiler(using=using).execute_sql(return_id)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\sql\compiler.py", line 1099, in execute_sql
    cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 80, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\utils.py", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\utils\six.py", line 685, in reraise
    raise value.with_traceback(tb)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\utils.py", line 65, in execute
    return self.cursor.execute(sql, params)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\backends\sqlite3\base.py", line 328, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.IntegrityError: NOT NULL constraint failed: crm_payment.consultant_id
[2017-12-30 16:11:45,186][Thread-1:1468][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /kind_admin/crm/customerfollowup/add/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\permissions\permission.py", line 75, in inner
    response = func(request, *args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\contrib\auth\decorators.py", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\kind_admin\views.py", line 93, in table_add
    "table_name": table_name,
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\shortcuts.py", line 30, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader.py", line 68, in render_to_string
    return template.render(context, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\backends\django.py", line 66, in render
    return self.template.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 207, in render
    return self._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\library.py", line 203, in render
    output = self.func(*resolved_args, **resolved_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\kind_admin\templatetags\tags.py", line 296, in get_all_error
    return model_form_obj.errors.get("__all__", "")
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\forms\forms.py", line 175, in errors
    self.full_clean()
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\forms\forms.py", line 384, in full_clean
    self._clean_fields()
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\forms\forms.py", line 396, in _clean_fields
    value = field.widget.value_from_datadict(self.data, self.files, self.add_prefix(name))
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\forms\widgets.py", line 639, in value_from_datadict
    getter = data.get
AttributeError: 'generator' object has no attribute 'get'
[2017-12-30 16:17:36,684][Thread-3:4772][task_id:django.request][exception.py:135][ERROR][Internal Server Error: /kind_admin/crm/customer/]
Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\options.py", line 617, in get_field
    return self.fields_map[field_name]
KeyError: 'add_customer_followup'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\GIT\HomeWork\day24\PerfectCRM\kind_admin\templatetags\tags.py", line 69, in get_table_rows
    field_obj = obj._meta.get_field(column)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\db\models\options.py", line 619, in get_field
    raise FieldDoesNotExist("%s has no field named '%s'" % (self.object_name, field_name))
django.core.exceptions.FieldDoesNotExist: Customer has no field named 'add_customer_followup'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\exception.py", line 41, in inner
    response = get_response(request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\core\handlers\base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\crm\permissions\permission.py", line 75, in inner
    response = func(request, *args, **kwargs)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\contrib\auth\decorators.py", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\kind_admin\views.py", line 57, in table_objs
    "search_content": request.GET.get("_q", ""),
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\shortcuts.py", line 30, in render
    content = loader.render_to_string(template_name, context, request, using=using)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader.py", line 68, in render_to_string
    return template.render(context, request)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\backends\django.py", line 66, in render
    return self.template.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 207, in render
    return self._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 177, in render
    return compiled_parent._render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 199, in _render
    return self.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\loader_tags.py", line 72, in render
    result = block.nodelist.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 990, in render
    bit = node.render_annotated(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\defaulttags.py", line 216, in render
    nodelist.append(node.render_annotated(context))
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\base.py", line 957, in render_annotated
    return self.render(context)
  File "D:\Software\Anaconda\envs\py3-django\lib\site-packages\django\template\library.py", line 203, in render
    output = self.func(*resolved_args, **resolved_kwargs)
  File "D:\GIT\HomeWork\day24\PerfectCRM\kind_admin\templatetags\tags.py", line 116, in get_table_rows
    column_data = getattr(admin_class, column)()
  File "D:\GIT\HomeWork\day24\PerfectCRM\kind_admin\kind_admin.py", line 80, in add_customer_followup
    点击添加</a>""" % (self.instance)
TypeError: not enough arguments for format string
